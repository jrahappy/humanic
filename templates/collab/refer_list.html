{% load static %}
{% load custom_filters %}

<tbody id="refer_list_box" class="divide-y divide-gray-300"
    hx-get="{% url 'collab:refer_list' company.id  %}" 
    hx-trigger="RefersChanged from:body"
    hx-target="this"
    hx-swap="outerHTML"
    
>
{% for refer in refers %}
    <tr id="{{refer.id}}" a
        class="hover:bg-sky-100 cursor-pointer"
        onclick="location.href='{% url 'collab:refer_detail' refer.id %}'"
    >
        <td class="whitespace-nowrap px-3 py-2 text-sm text-gray-900">{{ refer.id }}</td>
        <td class="whitespace-nowrap px-3 py-2 text-sm text-gray-900">{{ refer.referred_date }}</td>
        <td class="whitespace-nowrap px-3 py-2 text-sm text-gray-900">{{ refer.company|handle_none }}</td>
        <td class="whitespace-nowrap px-3 py-2 text-sm text-gray-900">{{ refer.company.office_phone|handle_none }}</td>
        <td class="whitespace-nowrap px-3 py-2 text-sm text-gray-900">{{ refer.patient_name|handle_none }}</td>
        <td class="whitespace-nowrap px-3 py-2 text-sm text-gray-900">{{ refer.patient_phone|handle_none }}</td>
        <td class="whitespace-nowrap px-3 py-2 text-sm text-gray-900">{{ refer.refertreatment_set|default_if_none:"N/A"|handle_none }}</td>
        <td class="whitespace-nowrap px-3 py-2 text-sm text-gray-900">{{ refer.status|handle_none }}</td>
    </tr>
{% empty %}

{% endfor %}
</tbody>